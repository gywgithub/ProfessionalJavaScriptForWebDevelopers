<!DOCTYPE html>
<html>

<head>
  <title></title>
</head>

<body>
  <script>
    // 24.6 Beacon API
    navigator.sendBeacon('https://example.com/analytics-reporting-url', '{foo:"bar"}');

    // 24.7 Web Socket 
    let socket = new WebSocket('ws://www.example.com/server.php');


    socket.onopen = function() {
      console.log('Connection established.');
    };

    socket.onerror = function() {
      console.log('Connection error.');
    };

    socket.onclose = function(event) {
      console.log('Connection closed.');
      console.log(`as clean? ${event.wasClean} Code=${event.code} Reason=${event.reason}`);
    };

    let stringData = 'Hello World!';
    let arrayBufferData = Uint8Array.from(['f', 'o', 'o']);
    let blobData = new Blob(['f', 'o', 'o']);

    socket.send(stringData);
    socket.send(arrayBufferData.buffer);
    socket.send(blobData);

    socket.onmessage = function(event) {
      let data = event.data;
      console.log(data);
    }

    socket.close();
  </script>
</body>

</html>