<!DOCTYPE html>
<html>
  <head>
    <title></title>
  </head>
  <body>
    <script>
      console.log('1')
      Notification.requestPermission().then((permission) => {
        console.log('User responded to permission request: ', permission);
      });

      let n = null;
      setTimeout(() => {
        n = new Notification('I will close');

        n.onshow = () => console.log('Notification was shown!');
        n.onclick = () => console.log('Notification was clicked!');
        n.onclose = () => console.log('Notification was closed!');
        n.onerror = () => console.log('Notification experienced an error!');
      }, 2000);

      setTimeout(() => {
        n.close();
      }, 5000);

      // 监听页面是否可见
      document.addEventListener('visibilitychange', function () {
        console.log(document.visibilityState);
      });
    </script>
  </body>
</html>